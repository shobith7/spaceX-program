{"ast":null,"code":"var _jsxFileName = \"/home/qurae/Desktop/spaceX-program/pages/index.js\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport { withRouter, useRouter } from \"next/router\";\nimport Filters from '../components/Filters';\n\nconst InitialLoad = props => {\n  const {\n    0: fetchedData,\n    1: setFetchedData\n  } = useState([]);\n  const {\n    0: displayData,\n    1: setDisplayData\n  } = useState([]);\n  const {\n    0: selectedYear,\n    1: setSelectedYear\n  } = useState('');\n  const {\n    0: arrOfYears,\n    1: setArrOfYears\n  } = useState([]);\n  const {\n    0: successfulLaunch,\n    1: setSuccessfulLaunch\n  } = useState('');\n  const {\n    0: successfulLanding,\n    1: setSuccessfulLanding\n  } = useState('');\n  useEffect(() => {\n    if (props.router.asPath === '/') {\n      let filteredYears = [];\n      props.fetchedData.forEach(data => {\n        if (!filteredYears.includes(data.launch_year)) {\n          filteredYears.push(data.launch_year);\n        }\n      });\n      filteredYears.sort((a, b) => parseInt(a) - parseInt(b));\n      setArrOfYears(filteredYears);\n      setFetchedData(props.fetchedData);\n      setDisplayData(props.fetchedData);\n    } else {\n      let filteredYears = [];\n      props.fetchedData.forEach(data => {\n        if (!filteredYears.includes(data.launch_year)) {\n          filteredYears.push(data.launch_year);\n        }\n      });\n      filteredYears.sort((a, b) => parseInt(a) - parseInt(b));\n      setArrOfYears(filteredYears);\n      setFetchedData(props.fetchedData);\n      setDisplayData(props.fetchedData);\n      let launch = props.router.query.launch_success ? props.router.query.launch_success === \"true\" ? \"yesLaunched\" : props.router.query.launch_success === \"false\" ? \"notLaunched\" : \"\" : \"\";\n      let land = props.router.query.land_success ? props.router.query.land_success === \"true\" ? \"yesLanded\" : props.router.query.land_success === \"false\" ? \"notLanded\" : \"\" : \"\";\n      applyFilters({\n        data: props.fetchedData,\n        year: props.router.query.launch_year,\n        launch,\n        land\n      });\n    }\n  }, []);\n\n  const applyFilters = ({\n    data = fetchedData,\n    year,\n    launch,\n    land\n  }) => {\n    let newFetchedData = JSON.parse(JSON.stringify(data));\n    let filteredData = newFetchedData.filter(data => {\n      if (!year) {\n        if (!launch && land === \"yesLanded\") {\n          return data.rocket.first_stage.cores[0].land_success;\n        } else if (!launch && land === \"notLanded\") {\n          return !data.rocket.first_stage.cores[0].land_success;\n        } else if (launch === \"yesLaunched\" && land === \"yesLanded\") {\n          return data.launch_success && data.rocket.first_stage.cores[0].land_success;\n        } else if (launch === \"notLaunched\" && land === \"yesLanded\") {\n          return !data.launch_success && data.rocket.first_stage.cores[0].land_success;\n        } else if (launch === \"yesLaunched\" && land === \"notLanded\") {\n          return data.launch_success && !data.rocket.first_stage.cores[0].land_success;\n        } else if (launch === \"notLaunched\" && land === \"notLanded\") {\n          return !data.launch_success && !data.rocket.first_stage.cores[0].land_success;\n        } else if (launch === \"yesLaunched\" && !land) {\n          return data.launch_success;\n        } else if (launch === \"notLaunched\" && !land) {\n          return !data.launch_success;\n        }\n      } else {\n        if (!launch && !land) {\n          return year === data.launch_year;\n        } else if (!launch && land === \"yesLanded\") {\n          return year === data.launch_year && data.rocket.first_stage.cores[0].land_success;\n        } else if (!launch && land === \"notLanded\") {\n          return year === data.launch_year && !data.rocket.first_stage.cores[0].land_success;\n        } else if (launch === \"yesLaunched\" && land === \"yesLanded\") {\n          return year === data.launch_year && data.launch_success && data.rocket.first_stage.cores[0].land_success;\n        } else if (launch === \"notLaunched\" && land === \"yesLanded\") {\n          return year === data.launch_year && !data.launch_success && data.rocket.first_stage.cores[0].land_success;\n        } else if (launch === \"yesLaunched\" && land === \"notLanded\") {\n          return year === data.launch_year && data.launch_success && !data.rocket.first_stage.cores[0].land_success;\n        } else if (launch === \"notLaunched\" && land === \"notLanded\") {\n          return year === data.launch_year && !data.launch_success && !data.rocket.first_stage.cores[0].land_success;\n        } else if (launch === \"yesLaunched\" && !land) {\n          return year === data.launch_year && data.launch_success;\n        } else if (launch === \"notLaunched\" && !land) {\n          return year === data.launch_year && !data.launch_success;\n        }\n      }\n    });\n    setSuccessfulLaunch(launch);\n    setSuccessfulLanding(land);\n    setDisplayData(filteredData);\n    setSelectedYear(year);\n  };\n\n  const clearFilters = () => {\n    setSelectedYear('');\n    setSuccessfulLaunch('');\n    setSuccessfulLanding('');\n    setDisplayData(fetchedData);\n    props.router.push(\"/\", \"/\", {\n      shallow: true\n    });\n  };\n\n  return __jsx(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 5\n    }\n  }, __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }\n  }, `SpaceX Launch Programs`), arrOfYears.length > 0 && __jsx(Filters, {\n    arrOfYears: arrOfYears,\n    applyFilters: applyFilters,\n    selectedYear: selectedYear,\n    successfulLaunch: successfulLaunch,\n    successfulLanding: successfulLanding,\n    clearFilters: clearFilters,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }\n  }), displayData.length > 0 && __jsx(\"div\", {\n    className: \"dispProg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, displayData.map((data, i) => __jsx(\"div\", {\n    key: i,\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }\n  }, __jsx(\"img\", {\n    src: data.links.mission_patch_small,\n    className: \"cardImg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 15\n    }\n  }), __jsx(\"p\", {\n    className: \"cardHeading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 15\n    }\n  }, `${data.mission_name} #${data.flight_number}`), __jsx(\"p\", {\n    className: \"mission\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 15\n    }\n  }, `Mission Ids -`), data.mission_id.length === 0 && __jsx(\"p\", {\n    className: \"missionId\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 48\n    }\n  }, \"\\u2022\", ` NA`), data.mission_id.length > 0 && __jsx(\"p\", {\n    className: \"missionId\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 46\n    }\n  }, \"\\u2022\", data.mission_id.length > 0 && data.mission_id.map((mission, i) => __jsx(\"span\", {\n    key: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 19\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 21\n    }\n  }, `${i === 0 ? `` : `, `} ${mission} `)))), __jsx(\"p\", {\n    className: \"mission\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 17\n    }\n  }, `Launch Year : `, __jsx(\"span\", {\n    className: \"details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 19\n    }\n  }, data.launch_year)), __jsx(\"p\", {\n    className: \"mission\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 17\n    }\n  }, `Successful Launch : `, __jsx(\"span\", {\n    className: \"details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 19\n    }\n  }, data.launch_success ? `Yes` : `No`)), __jsx(\"p\", {\n    className: \"mission\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 17\n    }\n  }, `Successful Landing : `, __jsx(\"span\", {\n    className: \"details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 19\n    }\n  }, data.rocket.first_stage.cores[0].land_success ? `Yes` : `No`))))), __jsx(\"p\", {\n    className: \"developer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }\n  }, `SpaceX Launch Programs`));\n};\n\nexport default withRouter(InitialLoad);\n\nInitialLoad.getInitialProps = async () => {\n  return {};\n};\n\nexport async function getServerSideProps() {\n  const res = await fetch('https://api.spaceXdata.com/v3/launches?limit=100');\n  const fetchedData = await res.json();\n  return {\n    props: {\n      fetchedData\n    }\n  };\n}","map":{"version":3,"sources":["/home/qurae/Desktop/spaceX-program/pages/index.js"],"names":["React","useState","useEffect","withRouter","useRouter","Filters","InitialLoad","props","fetchedData","setFetchedData","displayData","setDisplayData","selectedYear","setSelectedYear","arrOfYears","setArrOfYears","successfulLaunch","setSuccessfulLaunch","successfulLanding","setSuccessfulLanding","router","asPath","filteredYears","forEach","data","includes","launch_year","push","sort","a","b","parseInt","launch","query","launch_success","land","land_success","applyFilters","year","newFetchedData","JSON","parse","stringify","filteredData","filter","rocket","first_stage","cores","clearFilters","shallow","length","map","i","links","mission_patch_small","mission_name","flight_number","mission_id","mission","getInitialProps","getServerSideProps","res","fetch","json"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { withRouter, useRouter } from \"next/router\";\nimport Filters from '../components/Filters';\n\nconst InitialLoad = (props) => {\n  const[ fetchedData, setFetchedData ] = useState([]);\n  const[ displayData, setDisplayData ] = useState([]);\n  const[ selectedYear, setSelectedYear ] = useState('');\n  const[ arrOfYears, setArrOfYears ] = useState([]);\n  const[ successfulLaunch, setSuccessfulLaunch] = useState('');\n  const[ successfulLanding, setSuccessfulLanding] = useState('');\n\n  useEffect( () => {\n      if( props.router.asPath === '/' ){\n        let filteredYears = [];\n        props.fetchedData.forEach( data => {\n          if( !filteredYears.includes(data.launch_year) ){\n            filteredYears.push(data.launch_year);\n          }\n        });\n        filteredYears.sort( (a,b) => parseInt(a) - parseInt(b) );\n        setArrOfYears(filteredYears);\n        setFetchedData(props.fetchedData);\n        setDisplayData(props.fetchedData);\n      }else{\n        let filteredYears = [];\n        props.fetchedData.forEach( data => {\n          if( !filteredYears.includes(data.launch_year) ){\n            filteredYears.push(data.launch_year);\n          }\n        });\n        filteredYears.sort( (a,b) => parseInt(a) - parseInt(b) );\n        setArrOfYears(filteredYears);\n        setFetchedData(props.fetchedData);\n        setDisplayData(props.fetchedData);\n        let launch = props.router.query.launch_success ? props.router.query.launch_success === \"true\" ? \"yesLaunched\" : \n        props.router.query.launch_success === \"false\" ? \"notLaunched\" : \"\" : \"\";\n        let land = props.router.query.land_success ?props.router.query.land_success === \"true\" ? \"yesLanded\" : \n        props.router.query.land_success === \"false\" ? \"notLanded\" : \"\" : \"\";\n        applyFilters({ data :props.fetchedData, year : props.router.query.launch_year, launch, land} );  \n      }\n  }, []);\n  \n  const applyFilters = ( {data = fetchedData, year, launch, land} ) => {\n    let newFetchedData = JSON.parse(JSON.stringify( data ));\n    let filteredData = newFetchedData.filter( data => {\n      \n      if( !year ){\n        if( !launch && land === \"yesLanded\"){\n          return data.rocket.first_stage.cores[0].land_success;\n        } else if( !launch && land === \"notLanded\" ){\n          return !data.rocket.first_stage.cores[0].land_success;\n        } else if( launch === \"yesLaunched\" && land === \"yesLanded\" ){\n          return data.launch_success && data.rocket.first_stage.cores[0].land_success;\n        } else if( launch === \"notLaunched\" && land === \"yesLanded\" ){\n          return !data.launch_success && data.rocket.first_stage.cores[0].land_success;\n        } else if( launch === \"yesLaunched\" && land === \"notLanded\" ){\n          return data.launch_success && !data.rocket.first_stage.cores[0].land_success;\n        } else if( launch === \"notLaunched\" && land === \"notLanded\" ){\n          return !data.launch_success && !data.rocket.first_stage.cores[0].land_success;\n        } else if( launch === \"yesLaunched\" && !land ){\n          return data.launch_success;\n        } else if( launch === \"notLaunched\" && !land ){\n          return !data.launch_success;\n        }\n      } else{\n        if( !launch && !land ){\n          return year === data.launch_year;\n        } else if( !launch && land === \"yesLanded\"){\n          return year === data.launch_year && data.rocket.first_stage.cores[0].land_success;\n        } else if( !launch && land === \"notLanded\" ){\n          return year === data.launch_year && !data.rocket.first_stage.cores[0].land_success;\n        } else if( launch === \"yesLaunched\" && land === \"yesLanded\" ){\n          return year === data.launch_year && data.launch_success && data.rocket.first_stage.cores[0].land_success;\n        } else if( launch === \"notLaunched\" && land === \"yesLanded\" ){\n          return year === data.launch_year && !data.launch_success && data.rocket.first_stage.cores[0].land_success;\n        } else if( launch === \"yesLaunched\" && land === \"notLanded\" ){\n          return year === data.launch_year && data.launch_success && !data.rocket.first_stage.cores[0].land_success;\n        } else if( launch === \"notLaunched\" && land === \"notLanded\" ){\n          return year === data.launch_year && !data.launch_success && !data.rocket.first_stage.cores[0].land_success;\n        } else if( launch === \"yesLaunched\" && !land ){\n          return year === data.launch_year && data.launch_success;\n        } else if( launch === \"notLaunched\" && !land ){\n          return year === data.launch_year && !data.launch_success;\n        }\n      }\n    }); \n    setSuccessfulLaunch(launch);\n    setSuccessfulLanding(land);\n    setDisplayData( filteredData );\n    setSelectedYear( year );\n  }\n\n  const clearFilters = () => {\n    setSelectedYear('');\n    setSuccessfulLaunch('');\n    setSuccessfulLanding('');\n    setDisplayData(fetchedData);\n    props.router.push(\"/\", \"/\", { shallow: true });\n  }\n\n  return(\n    <div className=\"container\">\n      <h2>{`SpaceX Launch Programs`}</h2>\n      {\n        arrOfYears.length > 0 &&\n        <Filters arrOfYears={arrOfYears} \n          applyFilters={applyFilters} \n          selectedYear={selectedYear} \n          successfulLaunch={successfulLaunch}\n          successfulLanding={successfulLanding}\n          clearFilters={clearFilters} />\n      }\n      {\n        displayData.length > 0 &&\n        <div className=\"dispProg\">\n          {displayData.map( (data, i) => (\n            <div key={i} className=\"card\">\n              <img src={data.links.mission_patch_small} className=\"cardImg\"/>\n              <p className=\"cardHeading\">{`${data.mission_name} #${data.flight_number}`}</p>\n              <p className=\"mission\">{`Mission Ids -`}</p>\n              {data.mission_id.length === 0 && <p className=\"missionId\">&#8226;{` NA`}</p>}\n              {data.mission_id.length > 0 && <p className=\"missionId\">&#8226;\n                {data.mission_id.length > 0 && data.mission_id.map(( mission, i )=>(\n                  <span key={i}>\n                    <span>{`${i === 0 ? `` : `, `} ${mission} `}</span>\n                  </span>\n                ))}\n              </p>}\n                <p className=\"mission\">\n                  {`Launch Year : `}\n                  <span className=\"details\">{data.launch_year}</span>\n                </p>\n                <p className=\"mission\">\n                  {`Successful Launch : `}\n                  <span className=\"details\">{data.launch_success ? `Yes` : `No`}</span>\n                </p>\n                <p className=\"mission\">\n                  {`Successful Landing : `}\n                  <span className=\"details\">{data.rocket.first_stage.cores[0].land_success ? `Yes` : `No`}</span>\n                </p>\n            </div>\n          ))}\n        </div>\n      }\n      <p className=\"developer\">{`SpaceX Launch Programs`}</p>\n    </div>\n  )\n}\n\nexport default withRouter(InitialLoad);\n\nInitialLoad.getInitialProps = async () => {\n  return {};\n};\n\nexport async function getServerSideProps() {\n  const res = await fetch( 'https://api.spaceXdata.com/v3/launches?limit=100' );\n  const fetchedData = await res.json();\n  return {\n    props: {\n      fetchedData\n    }\n  }\n}"]},"metadata":{},"sourceType":"module"}